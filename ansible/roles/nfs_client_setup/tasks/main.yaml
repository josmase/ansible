- name: install nfs package
  package:
    name: "{{ nfs_package_name }}"
    state: latest
  vars:
    nfs_package_name: "{{ 'nfs-common' if ansible_os_family == 'Debian' else 'nfs-utils' }}"

- name: create install directory
  file:
    path: "{{ nfs_mount_point }}"
    state: directory

- name: Bind storage to nfs exports
  ansible.posix.mount:
    state: mounted
    path: "{{ nfs_mount_point }}"
    src: "{{ nfs_mount_src}}"
    fstype: nfs
    opts: soft,lock,vers=4
